{"version":3,"sources":["components/Modal.js","panels/Home.js","App.js","index.js"],"names":["Modal","_ref","activeModal","onCloseModal","onJoinToGroup","react_default","a","createElement","vkui","id","onClose","title","caption","actions","type","action","Home","go","fetchedUser","before","photo_200","src","description","city","concat","first_name","last_name","size","level","onClick","data-to","components_Modal","group_id","requiredToCallApi","v","access_token","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","activateModal","setState","closeModal","joinToGroup","connect","send","state","activePanel","_this2","subscribe","detail","console","log","data","method","params","objectSpread","request_id","user_id","response","panels_Home","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"yNAqBeA,UAjBD,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,YAAaC,EAAfF,EAAeE,aAAcC,EAA7BH,EAA6BG,cAA7B,OACVC,EAAAC,EAAAC,cAACC,EAAA,UAAD,CAAWN,YAAaA,GACpBG,EAAAC,EAAAC,cAACC,EAAA,UAAD,CACIC,GAAI,uBACJC,QAAS,kBAAMP,KACfQ,MAAM,kHACNC,QAAQ,oQACRC,QAAS,CAAC,CACNF,MAAO,mDACPG,KAAM,UACNC,OAAQ,kBAAMX,YCkBfY,EA5BF,SAAAf,GAAA,IAAEQ,EAAFR,EAAEQ,GAAIQ,EAANhB,EAAMgB,GAAIC,EAAVjB,EAAUiB,YAAahB,EAAvBD,EAAuBC,YAAaC,EAApCF,EAAoCE,aAAcC,EAAlDH,EAAkDG,cAAlD,OACTC,EAAAC,EAAAC,cAACC,EAAA,MAAD,CAAOC,GAAIA,GACPJ,EAAAC,EAAAC,cAACC,EAAA,YAAD,gBACCU,GACDb,EAAAC,EAAAC,cAACC,EAAA,MAAD,CAAOG,MAAM,qCACTN,EAAAC,EAAAC,cAACC,EAAA,SAAD,CACIW,OAAQD,EAAYE,UAAYf,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQa,IAAKH,EAAYE,YAAe,KACxEE,YAAaJ,EAAYK,MAAQL,EAAYK,KAAKZ,MAAQO,EAAYK,KAAKZ,MAAQ,IAFvF,GAAAa,OAIQN,EAAYO,WAJpB,KAAAD,OAIkCN,EAAYQ,aAIlDrB,EAAAC,EAAAC,cAACC,EAAA,MAAD,CAAOG,MAAM,sBACTN,EAAAC,EAAAC,cAACC,EAAA,IAAD,KACIH,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQmB,KAAK,KAAKC,MAAM,IAAIC,QAASZ,EAAIa,UAAQ,UAAjD,gCAKRzB,EAAAC,EAAAC,cAACwB,EAAD,CACI7B,YAAaA,EACbC,aAAcA,EACdC,cAAeA,MCpBrB4B,EAAW,UACXC,EAAoB,CACtBC,EAAK,QACLC,aAAgB,2EAoELC,cAhEX,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KASVQ,cAAgB,WACZP,EAAKQ,SAAS,CAAC5C,YAAa,0BAXboC,EAcnBS,WAAa,WACTT,EAAKQ,SAAS,CAAC5C,YAAa,QAfboC,EAkBnBU,YAAc,WACVC,IAAQC,KAAK,oBAAqB,CAAClB,aACnCM,EAAKS,cAjBLT,EAAKa,MAAQ,CACTC,YAAa,OACblC,YAAa,KACbhB,YAAa,MANFoC,mFAuBC,IAAAe,EAAAZ,KAChBQ,IAAQK,UAAU,SAAArD,GAAc,IAAZsD,EAAYtD,EAAZsD,OAEhB,OADAC,QAAQC,IAAIF,GACJA,EAAOzC,MACX,IAAK,4BACDuC,EAAKP,SAAS,CAAC5B,YAAaqC,EAAOG,OACnCT,IAAQC,KAAK,wBAAyB,CAClCS,OAAU,kBACVC,OAASrB,OAAAsB,EAAA,EAAAtB,CAAA,CACLP,WACA8B,WAAc,kBACdC,QAAWR,EAAOG,KAAKjD,IAAOwB,KAGtC,MACJ,IAAK,8BAC8B,oBAA3BsB,EAAOG,KAAKI,YAA6D,IAAzBP,EAAOG,KAAKM,SAC5DX,EAAKR,iBAELW,QAAQC,IAAI,kBACZR,IAAQC,KAAK,sBAK7BD,IAAQC,KAAK,sBAAuB,qCAIpC,OACI7C,EAAAC,EAAAC,cAACC,EAAA,KAAD,CAAM4C,YAAaX,KAAKU,MAAMC,aAC1B/C,EAAAC,EAAAC,cAAC0D,EAAD,CAAMxD,GAAG,OACHS,YAAauB,KAAKU,MAAMjC,YACxBhB,YAAauC,KAAKU,MAAMjD,YACxBC,aAAcsC,KAAKM,WACnB3C,cAAeqC,KAAKO,sBA3DxBkB,IAAMC,WCJxBlB,IAAQC,KAAK,eAAgB,IAC7BM,QAAQC,IAAI,MAAOR,IAAQC,KAAK,sBAAuB,KAQvDkB,IAASC,OAAOhE,EAAAC,EAAAC,cAAC+D,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.b885295e.chunk.js","sourcesContent":["import React from 'react';\n\nimport {ModalRoot, ModalCard} from '@vkontakte/vkui';\n\nconst Modal = ({activeModal, onCloseModal, onJoinToGroup}) => (\n    <ModalRoot activeModal={activeModal}>\n        <ModalCard\n            id={'USER_SUBSCRIBE_MODAL'}\n            onClose={() => onCloseModal()}\n            title=\"Вы не вступили группу\"\n            caption=\"Для использования функционала нажмите вступить.\"\n            actions={[{\n                title: 'Всутпить',\n                type: 'primary',\n                action: () => onJoinToGroup()\n            }]}\n        >\n        </ModalCard>\n    </ModalRoot>\n);\n\nexport default Modal;\n","import React from 'react';\nimport {Panel, ListItem, Button, Group, Div, Avatar, PanelHeader} from '@vkontakte/vkui';\nimport Modal from \"../components/Modal\";\n\nconst Home = ({id, go, fetchedUser, activeModal, onCloseModal, onJoinToGroup}) => (\n    <Panel id={id}>\n        <PanelHeader>Example</PanelHeader>\n        {fetchedUser &&\n        <Group title=\"User Data Fetched with VK Connect\">\n            <ListItem\n                before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\n                description={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\n            >\n                {`${fetchedUser.first_name} ${fetchedUser.last_name}`}\n            </ListItem>\n        </Group>}\n\n        <Group title=\"Navigation Example\">\n            <Div>\n                <Button size=\"xl\" level=\"2\" onClick={go} data-to=\"persik\">\n                    Show me the Persik, please\n                </Button>\n            </Div>\n        </Group>\n        <Modal\n            activeModal={activeModal}\n            onCloseModal={onCloseModal}\n            onJoinToGroup={onJoinToGroup}\n        />\n    </Panel>\n);\n\nexport default Home;\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport {View} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\n\nconst group_id = 185199781\nconst requiredToCallApi = {\n    \"v\": \"5.101\",\n    'access_token': '59f1b2e059f1b2e059f1b2e0c5599da582559f159f1b2e004b9e79590e7db44bab8b30c'\n}\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activePanel: 'home',\n            fetchedUser: null,\n            activeModal: null\n        };\n    }\n\n    activateModal = () => {\n        this.setState({activeModal: 'USER_SUBSCRIBE_MODAL'});\n    };\n\n    closeModal = () => {\n        this.setState({activeModal: null});\n    };\n\n    joinToGroup = () => {\n        connect.send(\"VKWebAppJoinGroup\", {group_id});\n        this.closeModal()\n    };\n\n    componentDidMount() {\n        connect.subscribe(({detail}) => {\n            console.log(detail);\n            switch (detail.type) {\n                case 'VKWebAppGetUserInfoResult':\n                    this.setState({fetchedUser: detail.data});\n                    connect.send('VKWebAppCallAPIMethod', {\n                        \"method\": \"groups.isMember\",\n                        \"params\": {\n                            group_id,\n                            \"request_id\": \"groups.isMember\",\n                            'user_id': detail.data.id, ...requiredToCallApi\n                        }\n                    });\n                    break;\n                case 'VKWebAppCallAPIMethodResult':\n                    if (detail.data.request_id === 'groups.isMember' && detail.data.response === 0) {\n                        this.activateModal()\n                    } else {\n                        console.log('VKWebAppOpenQR')\n                        connect.send(\"VKWebAppOpenQR\");\n                    }\n                    break;\n            }\n        });\n        connect.send('VKWebAppGetUserInfo', {});\n    }\n\n    render() {\n        return (\n            <View activePanel={this.state.activePanel}>\n                <Home id=\"home\"\n                      fetchedUser={this.state.fetchedUser}\n                      activeModal={this.state.activeModal}\n                      onCloseModal={this.closeModal}\n                      onJoinToGroup={this.joinToGroup}/>\n            </View>\n        );\n    }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\nconsole.log('kek', connect.send(\"VKWebAppGetUserInfo\", {}))\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}